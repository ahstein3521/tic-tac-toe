"use strict";function _classCallCheck(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(n,l){for(var e=0;e<l.length;e++){var t=l[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(l,e,t){return e&&n(l.prototype,e),t&&n(l,t),l}}(),newBoard=[null,null,null,null,null,null,null,null,null];Array.prototype.noNullVals=function(n){return this.every(function(l){return n[l]})},Array.prototype.allEqual=function(n){var l=n[this[0]];return n[this[1]]==l&&n[this[2]]==l};var State=function(){function n(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:newBoard.slice(),e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,n),this.board=l,this.turn=e,this.winningRow=null}return _createClass(n,[{key:"availableMoves",value:function(){var n=[];return this.board.forEach(function(l,e){l||n.push(e)}),n}},{key:"getNewState",value:function(l,e){var t=this.board.slice(),r=!this.turn;return t[l]=e,new n(t,r)}},{key:"isTerminal",value:function(){for(var n=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],l=this.board,e=null,t=!1,r=0;r<n.length;r++){var a=n[r];if(a.noNullVals(l)&&a.allEqual(l)){e=l[a[0]],t=!0,this.winningRow=a;break}}return t||l.indexOf(null)!=-1||(e="Tie"),e}}]),n}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),Game=function(){function e(t,a){_classCallCheck(this,e),this.player=t,this.ai=a,this.state=new State,this.lastMove=null}return _createClass(e,[{key:"reset",value:function(){game.state=new State}},{key:"makeMove",value:function(e){if(null==this.state.board[e]){this.state.board[e]=this.player,this.state.turn=!0;var t=this.lastMove=this.minimax(this.state,0).choice;this.state.board[t]=this.ai}}},{key:"isOver",value:function(){var e=this.state.isTerminal();return"Tie"==e?"Tied Game..":/X|O/.test(e)?this.ai+" Wins":void 0}},{key:"score",value:function(e,t){switch(e){case this.ai:return 10-t;case this.player:return t-10;case"Tie":return 0}}},{key:"minimax",value:function(e,t){var a=e.isTerminal();if("string"==typeof a){var i=this.score(a,t);return{score:i}}for(var r=e.availableMoves(),s=e.turn?this.ai:this.player,n={score:-(1/0),choice:-1},c=0;c<r.length;c++){var o=r[c],l=e.getNewState(o,s),u=this.minimax(l,t+1).score,h=e.turn&&u>n.score,v=!e.turn&&(n.score==-(1/0)||u<n.score);(v||h)&&(n.score=u,n.choice=o)}return n}}]),e}();
"use strict";function fillIn(e,a){var s=e.player,n=e.ai,t=(e.makeMove,a?s:n),r=a?0:400,l=this;setTimeout(function(){$(l).html("<h1>"+t+"</h1>"),$(l).css({cursor:"not-allowed"})},r)}function endGameCycle(e){var a=game.state.winningRow;a&&a.forEach(function(e){return $(squares[e]).addClass("winning-square")}),panel.html("<h3>"+e+"</h3>"),panel.addClass("game-over-status"),setTimeout(function(){panel.html("<h3>That was so fun, lets play again please!</h3>"),panel.removeClass("game-over-status"),squares.css({cursor:"pointer"}).html(""),game.reset()},3e3)}var game=void 0,squares=$("div.square"),panel=$("div.button-panel");$("button").on("click",function(){var e=$(this).data("symbol"),a="X"==e?"O":"X";game=new Game(e,a),squares.css({cursor:"pointer"}),panel.html("<h3>Make your move, partner..</h3>")}),$(".square").on("click",function(){if(game){var e=$(this).data("square");game.makeMove(e);var a=squares[game.lastMove];fillIn.call(this,game,!0),fillIn.call(a,game,!1);var s=game.isOver();s&&setTimeout(function(){return endGameCycle(s)},500)}});